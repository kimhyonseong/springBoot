<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>food insert</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
<div class="wrap">
    <form th:action="@{/admin/item}" method="post" enctype="multipart/form-data">
        <div>
            <label for="itemName">아이템 이름</label>
            <p th:text="${valid_name}"></p>
            <input type="text" id="itemName" name="name" th:value="${name}">
        </div>
        <div>
            <label for="itemCode">아이템 분류</label>
            <p th:text="${valid_code}"></p>
            <input type="text" id="itemCode" name="name" th:value="${code}">
        </div>
        <div>
            <label for="itemDesc">아이템 설명</label>
            <p th:text="${valid_description}"></p>
            <input type="text" id="itemDesc" name="name" th:value="${description}">
        </div>
        <div>
            <label for="itemPrice">아이템 가격</label>
            <p th:text="${valid_price}"></p>
            <input type="text" id="itemPrice" name="name" th:value="${price}">
        </div>
        <div>
            <label for="itemQuantity">아이템 수량</label>
            <p th:text="${valid_quantity}"></p>
            <input type="text" id="itemQuantity" name="name" th:value="${quantity}">
        </div>
        <div style="display: flex;
                    flex-direction: column;
                    flex-wrap: wrap;
                    align-items: baseline;">
            <p>아이템 사진</p>
            <label for="itemImg1">이미지1</label>
            <input style="display: none" type="file" id="itemImg1" name="name" th:value="${img?.imgUrl1}">
            <img src="https://via.placeholder.com/150" alt="img1">
            <label for="itemImg2">이미지2</label>
            <input style="display: none" type="file" id="itemImg2" name="name" th:value="${img?.imgUrl2}">
            <img src="https://via.placeholder.com/150" alt="img2">
            <label for="itemImg3">이미지3</label>
            <input style="display: none" type="file" id="itemImg3" name="name" th:value="${img?.imgUrl3}">
            <img src="https://via.placeholder.com/150" alt="img3">
        </div>
    </form>
</div>
<script>
    $(function () {
        $("#itemImg1").on("change", function () {
            console.log("123");
            upload($(this)[0]);
        })
    })

    function upload(target) {
        console.log(target.files);

        const image = target;
        const formData = new FormData();
        formData.append("image",image.files[0]);

        $.ajax({
            url:"/admin/imgUpload",
            type:"POST",
            processData: false,
            contentType: false,
            data : formData,
            success : function (data) {
                console.log(data);
            }
        })
    }
</script>
</body>
</html>